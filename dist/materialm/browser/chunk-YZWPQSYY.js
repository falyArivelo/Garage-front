import{j as g,k}from"./chunk-M22CPC4C.js";import{a as o,b as d,c as m}from"./chunk-JHHBZ5S2.js";import{$ as p,ea as a}from"./chunk-NNBNMEEF.js";import{a as h,b as l,c as u}from"./chunk-GAL4ENT6.js";var A=(()=>{class i{constructor(t,e){this.http=t,this.authService=e,this.apiUrl=g.baseUrl}getVehicles(){let t=localStorage.getItem("carcare-token"),e=new o({Authorization:`Bearer ${t}`});return this.http.get(`${this.apiUrl}/vehicles`,{headers:e})}getAllVehiclesMe(){let t=localStorage.getItem("carcare-token"),e=this.authService.currentUserValue,r=new o({Authorization:`Bearer ${t}`}),n=new d().set("user_id",e?.user_id??"");return this.http.get(`${this.apiUrl}/vehicles/me`,{headers:r,params:n})}getVehicleById(t){let e=localStorage.getItem("carcare-token"),r=new o({Authorization:e?`Bearer ${e}`:""});return this.http.get(`${this.apiUrl}/vehicle/${t}`,{headers:r})}updateVehicle(t){let e=localStorage.getItem("carcare-token");if(!e)throw new Error("Token manquant");let r=new o({Authorization:`Bearer ${e}`});return this.http.put(`${this.apiUrl}/vehicle/${t._id}`,t,{headers:r})}saveVehicle(t){let e=localStorage.getItem("carcare-token");if(!e)throw new Error("Token manquant");let r=new o({Authorization:`Bearer ${e}`}),n=this.authService.currentUserValue,c=t,{_id:w}=c,$=u(c,["_id"]),s=l(h({},$),{owner:n?.user_id??""});return console.log(s),this.http.post(`${this.apiUrl}/vehicles`,s,{headers:r})}deleteVehicle(t){let e=localStorage.getItem("carcare-token");if(!e)throw new Error("Token manquant");let r=new o({Authorization:`Bearer ${e}`}),n=encodeURIComponent(t);return console.log(`Encoded ID: ${n}`),this.http.delete(`${this.apiUrl}/vehicle/${n}`,{headers:r})}static{this.\u0275fac=function(e){return new(e||i)(a(m),a(k))}}static{this.\u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{A as a};
