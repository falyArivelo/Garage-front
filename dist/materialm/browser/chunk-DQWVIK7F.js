import{a as E}from"./chunk-YZWPQSYY.js";import{a as et}from"./chunk-PTF55QEO.js";import{b as He}from"./chunk-26Q3BSNR.js";import{a as Oe,b as qe}from"./chunk-4CWAV5PF.js";import{$ as je,K as xe,L as Le,P as Ie,Q as We,R as Pe,S as Ae,T as De,U as Be,V as ke,W as Fe,X as Re,Y as Ne,f as be,g as we,h as Ve,w as Te}from"./chunk-6GRSV3W3.js";import{a as ne}from"./chunk-3BXQV7YT.js";import{b as ve,d as T,e as ye,i as Se}from"./chunk-M22CPC4C.js";import{$a as x,Ca as R,Da as N,Fa as j,Ha as H,Ia as O,Ja as q,Pa as G,Qa as K,Ra as Y,Xa as z,Y as k,Ya as J,_a as Q,bb as Ee,cb as S,eb as U,fb as X,ib as Z,jb as $,kb as ee,lb as L,mb as I,nb as W,pb as te,rb as ie,sb as P,tb as A,xa as F}from"./chunk-LDYTSFDL.js";import"./chunk-JHHBZ5S2.js";import{Bc as Me,Eb as f,Jb as ce,Ob as t,Pb as i,Qb as M,Rb as _,Sb as v,Ub as se,Wb as y,Xb as B,Xc as Ce,Zc as w,ad as _e,cd as V,fb as m,gc as pe,hc as a,ic as b,jc as D,kb as g,lc as s,mc as p,nc as u,oa as me,pa as de,qc as ue,rc as he,sb as C,tc as fe,uc as ge,xb as h}from"./chunk-NNBNMEEF.js";import{f as $e}from"./chunk-GAL4ENT6.js";var ze=$e(et());var tt=e=>["/vehicles/edit",e];function it(e,d){e&1&&(t(0,"th",18),a(1," Marque "),i())}function nt(e,d){if(e&1&&(t(0,"td",19)(1,"div",20)(2,"h6",21),a(3),i()()()),e&2){let l=d.$implicit;m(3),b(l.brand)}}function ot(e,d){e&1&&(t(0,"th",18),a(1," Mod\xE8le "),i())}function at(e,d){if(e&1&&(t(0,"td",19),a(1),i()),e&2){let l=d.$implicit;m(),b(l.model)}}function lt(e,d){e&1&&(t(0,"th",18),a(1," Ann\xE9e "),i())}function rt(e,d){if(e&1&&(t(0,"td",19),a(1),i()),e&2){let l=d.$implicit;m(),b(l.year)}}function mt(e,d){e&1&&(t(0,"th",18),a(1," Immatriculation "),i())}function dt(e,d){if(e&1&&(t(0,"td",19),a(1),i()),e&2){let l=d.$implicit;m(),b(l.licensePlate)}}function ct(e,d){e&1&&(t(0,"th",18),a(1," Carburant"),i())}function st(e,d){if(e&1&&(t(0,"td",19),a(1),i()),e&2){let l=d.$implicit;m(),b(l.fuelType)}}function pt(e,d){e&1&&(t(0,"th",18),a(1," Kilom\xE9trage "),i())}function ut(e,d){if(e&1&&(t(0,"td",19),a(1),i()),e&2){let l=d.$implicit;m(),D("",l.mileage," km")}}function ht(e,d){e&1&&(t(0,"th",18),a(1," Etat "),i())}function ft(e,d){if(e&1&&(t(0,"td",19)(1,"span"),a(2),fe(3,"titlecase"),i()()),e&2){let l=d.$implicit;m(),ce("bg-light-",l.progress," text-",l.progress," f-s-12 f-w-500 p-x-10 p-y-4 rounded-pill"),m(),D(" ",ge(3,5,l.status)," ")}}function gt(e,d){e&1&&M(0,"th",18)}function Mt(e,d){if(e&1){let l=se();t(0,"td",19)(1,"button",22)(2,"mat-icon"),a(3,"more_vert"),i()(),t(4,"mat-menu",23,0)(6,"a",24),M(7,"i-tabler",25),t(8,"span"),a(9,"Edit"),i()(),t(10,"a",26),y("click",function(){let n=me(l).$implicit,c=B();return de(c.confirmDelete(n._id))}),M(11,"i-tabler",27),t(12,"span"),a(13,"Delete"),i()()()()}if(e&2){let l=d.$implicit,r=pe(5);m(),f("matMenuTriggerFor",r),m(5),f("routerLink",ue(2,tt,l._id))}}function Ct(e,d){e&1&&M(0,"tr",28)}function _t(e,d){e&1&&M(0,"tr",29)}function vt(e,d){e&1&&M(0,"mat-progress-bar",30)}var Je=(()=>{class e{constructor(l,r){this.vehicleService=l,this.cdr=r,this.displayedColumns=["brand","model","year","licensePlate","fuelType","mileage","status","menu"],this.dataSource=[],this.isLoading=!0}ngOnInit(){!this.dataSource||this.dataSource.length===0?this.loadVehicles():this.isLoading=!1}loadVehicles(){this.isLoading=!0,this.vehicleService.getAllVehiclesMe().subscribe({next:l=>{this.dataSource=l,this.isLoading=!1},error:()=>{this.isLoading=!1}})}confirmDelete(l){ze.default.fire({title:"Are you sure?",text:"Do you want to delete this vehicle?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(r=>{r.isConfirmed&&this.deleteVehicle(l)})}deleteVehicle(l){console.log(l),this.vehicleService.deleteVehicle(l).subscribe({next:r=>{console.log("V\xE9hicule supprim\xE9 avec succ\xE8s:",r),this.dataSource=this.dataSource.filter(n=>n._id!==l),this.cdr.detectChanges()},error:r=>{console.error("Erreur lors de la suppression:",r)}})}static{this.\u0275fac=function(r){return new(r||e)(g(E),g(Me))}}static{this.\u0275cmp=C({type:e,selectors:[["app-list-vehicles"]],inputs:{dataSource:"dataSource"},decls:33,vars:4,consts:[["menu","matMenu"],[1,"cardWithShadow","overflow-hidden"],[1,"m-b-4"],[1,"table-responsive"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","brand"],["mat-header-cell","","class","mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","model"],["matColumnDef","year"],["matColumnDef","licensePlate"],["matColumnDef","fuelType"],["matColumnDef","mileage"],["matColumnDef","status"],["matColumnDef","menu"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mode","indeterminate",4,"ngIf"],["mat-header-cell","",1,"mat-subtitle-1","f-s-14"],["mat-cell",""],[1,"d-flex","align-items-center"],[1,"mat-subtitle-1","text-truncate-2","f-s-14","lh-sm"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"matMenuTriggerFor"],["xPosition","before"],[1,"d-flex","align-items-center","text-decoration-none","p-y-10","p-x-16","mat-body-1","gap-8",3,"routerLink"],["name","edit",1,"icon-18"],["href","javascript:void(0)",1,"d-flex","align-items-center","text-decoration-none","p-y-10","p-x-16","mat-body-1","gap-8",3,"click"],["name","trash",1,"icon-18"],["mat-header-row",""],["mat-row",""],["mode","indeterminate"]],template:function(r,n){r&1&&(t(0,"mat-card",1)(1,"mat-card-content")(2,"mat-card-title",2),a(3,"Mes V\xE9hicules"),i()(),t(4,"div",3)(5,"table",4),_(6,5),h(7,it,2,0,"th",6)(8,nt,4,1,"td",7),v(),_(9,8),h(10,ot,2,0,"th",6)(11,at,2,1,"td",7),v(),_(12,9),h(13,lt,2,0,"th",6)(14,rt,2,1,"td",7),v(),_(15,10),h(16,mt,2,0,"th",6)(17,dt,2,1,"td",7),v(),_(18,11),h(19,ct,2,0,"th",6)(20,st,2,1,"td",7),v(),_(21,12),h(22,pt,2,0,"th",6)(23,ut,2,1,"td",7),v(),_(24,13),h(25,ht,2,0,"th",6)(26,ft,4,7,"td",7),v(),_(27,14),h(28,gt,1,0,"th",6)(29,Mt,14,4,"td",7),v(),h(30,Ct,1,0,"tr",15)(31,_t,1,0,"tr",16),i(),h(32,vt,1,0,"mat-progress-bar",17),i()()),r&2&&(m(5),f("dataSource",n.dataSource),m(25),f("matHeaderRowDef",n.displayedColumns),m(),f("matRowDefColumns",n.displayedColumns),m(),f("ngIf",n.isLoading))},dependencies:[je,be,we,L,W,I,Ee,Te,P,Ie,Pe,ke,Ae,We,Fe,De,Be,Re,Ne,Ve,S,V,w,_e,qe,Oe,A,He,Se,ye],encapsulation:2})}}return e})();var Qe=(()=>{class e{constructor(l,r,n){this.vehicleService=l,this.router=r,this.snackBar=n,this.myVehicles=[]}ngOnInit(){this.loadVehicles()}loadVehicles(){this.vehicleService.getAllVehiclesMe().subscribe(l=>{this.myVehicles=l})}goToAddVehicle(){this.snackBar.open("V\xE9hicule ajout\xE9 avec succ\xE8s !","Fermer",{duration:2e3,verticalPosition:"top",panelClass:"alert-success"}),this.router.navigate(["/vehicles/add"])}static{this.\u0275fac=function(r){return new(r||e)(g(E),g(T),g(Le))}}static{this.\u0275cmp=C({type:e,selectors:[["app-me"]],decls:3,vars:1,consts:[["mat-flat-button","","color","primary",1,"m-b-8",3,"click"],[3,"dataSource"]],template:function(r,n){r&1&&(t(0,"button",0),y("click",function(){return n.goToAddVehicle()}),a(1,"Ajouter v\xE9hicule"),i(),M(2,"app-list-vehicles",1)),r&2&&(m(2),f("dataSource",n.myVehicles))},dependencies:[Je,S,x],encapsulation:2})}}return e})();var Ue=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=C({type:e,selectors:[["app-all"]],decls:2,vars:0,template:function(r,n){r&1&&(t(0,"p"),a(1,"all works!"),i())},encapsulation:2})}}return e})();var Vt=(e,d)=>({"success-message":e,"error-message":d});function Tt(e,d){e&1&&M(0,"mat-progress-bar",27)}function xt(e,d){if(e&1&&(t(0,"div",28),a(1),i()),e&2){let l=B();f("ngClass",he(2,Vt,l.messageType==="success",l.messageType==="error")),m(),D(" ",l.confirmationMessage," ")}}var Xe=(()=>{class e{constructor(l,r){this.vehicleService=l,this.router=r,this.vehicle={_id:"",owner:"",brand:"",model:"",year:new Date().getFullYear(),licensePlate:"",fuelType:"Essence",status:"Actif",color:"",mileage:0},this.isLoading=!1,this.confirmationMessage="",this.messageType="success"}save(){this.isLoading=!0,this.vehicleService.saveVehicle(this.vehicle).subscribe({next:l=>{l.success&&(this.confirmationMessage=l.message,this.messageType="success")},error:l=>{this.confirmationMessage=l.message,this.messageType="error"},complete:()=>{this.isLoading=!1}})}cancel(){this.router.navigate(["/vehicles/me"])}static{this.\u0275fac=function(r){return new(r||e)(g(E),g(T))}}static{this.\u0275cmp=C({type:e,selectors:[["app-add"]],decls:68,vars:10,consts:[[1,"cardWithShadow","theme-card"],[1,"m-b-0"],["mode","indeterminate",4,"ngIf"],[1,"b-t-1"],[1,"row"],[1,"col-lg-6"],[1,"f-w-600","m-b-8","d-block"],["appearance","outline",1,"w-100"],["matInput","","placeholder","ex: Toyota","name","brand",3,"ngModelChange","ngModel"],["matInput","","placeholder","ex: Corolla","name","model",3,"ngModelChange","ngModel"],["matInput","","type","number","placeholder","ex: 2022","name","year",3,"ngModelChange","ngModel"],["matInput","","placeholder","ex: AB-123-CD","name","licensePlate",3,"ngModelChange","ngModel"],["name","fuelType",3,"ngModelChange","ngModel"],["value","Essence"],["value","Diesel"],["value","\xC9lectrique"],["value","Hybride"],["matInput","","type","number","placeholder","ex: 120000","name","mileage",3,"ngModelChange","ngModel"],["name","status",3,"ngModelChange","ngModel"],["value","Actif"],["value","En r\xE9paration"],["value","Hors service"],["matInput","","placeholder","ex: Rouge","name","color",3,"ngModelChange","ngModel"],["class","confirmation-message",3,"ngClass",4,"ngIf"],[1,"m-t-12"],["mat-flat-button","","color","primary",1,"m-r-8",3,"click"],["mat-stroked-button","","color","warn","type","button"],["mode","indeterminate"],[1,"confirmation-message",3,"ngClass"]],template:function(r,n){r&1&&(t(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),a(3,"Ajouter un v\xE9hicule"),i()(),h(4,Tt,1,0,"mat-progress-bar",2),t(5,"mat-card-content",3)(6,"form")(7,"div",4)(8,"div",5)(9,"mat-label",6),a(10,"Marque"),i(),t(11,"mat-form-field",7)(12,"input",8),u("ngModelChange",function(o){return p(n.vehicle.brand,o)||(n.vehicle.brand=o),o}),i()()(),t(13,"div",5)(14,"mat-label",6),a(15,"Mod\xE8le"),i(),t(16,"mat-form-field",7)(17,"input",9),u("ngModelChange",function(o){return p(n.vehicle.model,o)||(n.vehicle.model=o),o}),i()()(),t(18,"div",5)(19,"mat-label",6),a(20,"Ann\xE9e"),i(),t(21,"mat-form-field",7)(22,"input",10),u("ngModelChange",function(o){return p(n.vehicle.year,o)||(n.vehicle.year=o),o}),i()()(),t(23,"div",5)(24,"mat-label",6),a(25,"Plaque d'immatriculation"),i(),t(26,"mat-form-field",7)(27,"input",11),u("ngModelChange",function(o){return p(n.vehicle.licensePlate,o)||(n.vehicle.licensePlate=o),o}),i()()(),t(28,"div",5)(29,"mat-label",6),a(30,"Type de carburant"),i(),t(31,"mat-form-field",7)(32,"mat-select",12),u("ngModelChange",function(o){return p(n.vehicle.fuelType,o)||(n.vehicle.fuelType=o),o}),t(33,"mat-option",13),a(34,"Essence"),i(),t(35,"mat-option",14),a(36,"Diesel"),i(),t(37,"mat-option",15),a(38,"\xC9lectrique"),i(),t(39,"mat-option",16),a(40,"Hybride"),i()()()(),t(41,"div",5)(42,"mat-label",6),a(43,"Kilom\xE9trage"),i(),t(44,"mat-form-field",7)(45,"input",17),u("ngModelChange",function(o){return p(n.vehicle.mileage,o)||(n.vehicle.mileage=o),o}),i()()(),t(46,"div",5)(47,"mat-label",6),a(48,"Statut"),i(),t(49,"mat-form-field",7)(50,"mat-select",18),u("ngModelChange",function(o){return p(n.vehicle.status,o)||(n.vehicle.status=o),o}),t(51,"mat-option",19),a(52,"Actif"),i(),t(53,"mat-option",20),a(54,"En r\xE9paration"),i(),t(55,"mat-option",21),a(56,"Hors service"),i()()()(),t(57,"div",5)(58,"mat-label",6),a(59,"Couleur"),i(),t(60,"mat-form-field",7)(61,"input",22),u("ngModelChange",function(o){return p(n.vehicle.color,o)||(n.vehicle.color=o),o}),i()()()(),h(62,xt,2,5,"div",23),t(63,"div",24)(64,"button",25),y("click",function(){return n.save()}),a(65,"Enregistrer"),i(),t(66,"button",26),a(67,"Annuler"),i()()()()()),r&2&&(m(4),f("ngIf",n.isLoading),m(8),s("ngModel",n.vehicle.brand),m(5),s("ngModel",n.vehicle.model),m(5),s("ngModel",n.vehicle.year),m(5),s("ngModel",n.vehicle.licensePlate),m(5),s("ngModel",n.vehicle.fuelType),m(13),s("ngModel",n.vehicle.mileage),m(5),s("ngModel",n.vehicle.status),m(11),s("ngModel",n.vehicle.color),m(),f("ngIf",n.confirmationMessage))},dependencies:[V,Ce,w,J,z,Y,ee,$,k,G,O,F,q,R,N,H,j,K,Z,S,x,ie,L,W,te,I,X,U,Q,A,P],styles:[".confirmation-message[_ngcontent-%COMP%]{padding:10px;color:#fff;border-radius:5px;margin-top:20px;text-align:center}.success-message[_ngcontent-%COMP%]{background-color:#4caf50}.error-message[_ngcontent-%COMP%]{background-color:#f44336}"]})}}return e})();function Lt(e,d){e&1&&M(0,"mat-progress-bar",26)}var Ze=(()=>{class e{constructor(l,r,n){this.route=l,this.vehicleService=r,this.router=n,this.vehicle={_id:"",owner:"",brand:"",model:"",year:0,licensePlate:"",fuelType:"Essence",mileage:0,status:"Actif",color:""},this.isLoading=!1}ngOnInit(){let l=this.route.snapshot.paramMap.get("id");l&&this.vehicleService.getVehicleById(l).subscribe(r=>{this.vehicle=r})}save(){this.isLoading=!0,this.vehicleService.updateVehicle(this.vehicle).subscribe({next:()=>{this.isLoading=!1},error:()=>{this.isLoading=!1}})}cancel(){this.router.navigate(["/vehicles/me"])}static{this.\u0275fac=function(r){return new(r||e)(g(ve),g(E),g(T))}}static{this.\u0275cmp=C({type:e,selectors:[["app-edit"]],decls:67,vars:9,consts:[[1,"cardWithShadow","theme-card"],[1,"m-b-0"],["mode","indeterminate",4,"ngIf"],[1,"b-t-1"],[1,"row"],[1,"col-lg-6"],[1,"f-w-600","m-b-8","d-block"],["appearance","outline",1,"w-100"],["matInput","","placeholder","ex: Toyota","name","brand",3,"ngModelChange","ngModel"],["matInput","","placeholder","ex: Corolla","name","model",3,"ngModelChange","ngModel"],["matInput","","type","number","placeholder","ex: 2022","name","year",3,"ngModelChange","ngModel"],["matInput","","placeholder","ex: AB-123-CD","name","licensePlate",3,"ngModelChange","ngModel"],["name","fuelType",3,"ngModelChange","ngModel"],["value","Essence"],["value","Diesel"],["value","\xC9lectrique"],["value","Hybride"],["matInput","","type","number","placeholder","ex: 120000","name","mileage",3,"ngModelChange","ngModel"],["name","status",3,"ngModelChange","ngModel"],["value","Actif"],["value","En r\xE9paration"],["value","Hors service"],["matInput","","placeholder","ex: Rouge","name","color",3,"ngModelChange","ngModel"],[1,"m-t-12"],["mat-flat-button","","color","primary",1,"m-r-8",3,"click"],["mat-stroked-button","","color","warn","type","button",3,"click"],["mode","indeterminate"]],template:function(r,n){r&1&&(t(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),a(3,"Modifier un v\xE9hicule"),i()(),h(4,Lt,1,0,"mat-progress-bar",2),t(5,"mat-card-content",3)(6,"form")(7,"div",4)(8,"div",5)(9,"mat-label",6),a(10,"Marque"),i(),t(11,"mat-form-field",7)(12,"input",8),u("ngModelChange",function(o){return p(n.vehicle.brand,o)||(n.vehicle.brand=o),o}),i()()(),t(13,"div",5)(14,"mat-label",6),a(15,"Mod\xE8le"),i(),t(16,"mat-form-field",7)(17,"input",9),u("ngModelChange",function(o){return p(n.vehicle.model,o)||(n.vehicle.model=o),o}),i()()(),t(18,"div",5)(19,"mat-label",6),a(20,"Ann\xE9e"),i(),t(21,"mat-form-field",7)(22,"input",10),u("ngModelChange",function(o){return p(n.vehicle.year,o)||(n.vehicle.year=o),o}),i()()(),t(23,"div",5)(24,"mat-label",6),a(25,"Plaque d'immatriculation"),i(),t(26,"mat-form-field",7)(27,"input",11),u("ngModelChange",function(o){return p(n.vehicle.licensePlate,o)||(n.vehicle.licensePlate=o),o}),i()()(),t(28,"div",5)(29,"mat-label",6),a(30,"Type de carburant"),i(),t(31,"mat-form-field",7)(32,"mat-select",12),u("ngModelChange",function(o){return p(n.vehicle.fuelType,o)||(n.vehicle.fuelType=o),o}),t(33,"mat-option",13),a(34,"Essence"),i(),t(35,"mat-option",14),a(36,"Diesel"),i(),t(37,"mat-option",15),a(38,"\xC9lectrique"),i(),t(39,"mat-option",16),a(40,"Hybride"),i()()()(),t(41,"div",5)(42,"mat-label",6),a(43,"Kilom\xE9trage"),i(),t(44,"mat-form-field",7)(45,"input",17),u("ngModelChange",function(o){return p(n.vehicle.mileage,o)||(n.vehicle.mileage=o),o}),i()()(),t(46,"div",5)(47,"mat-label",6),a(48,"Statut"),i(),t(49,"mat-form-field",7)(50,"mat-select",18),u("ngModelChange",function(o){return p(n.vehicle.status,o)||(n.vehicle.status=o),o}),t(51,"mat-option",19),a(52,"Actif"),i(),t(53,"mat-option",20),a(54,"En r\xE9paration"),i(),t(55,"mat-option",21),a(56,"Hors service"),i()()()(),t(57,"div",5)(58,"mat-label",6),a(59,"Couleur"),i(),t(60,"mat-form-field",7)(61,"input",22),u("ngModelChange",function(o){return p(n.vehicle.color,o)||(n.vehicle.color=o),o}),i()()()(),t(62,"div",23)(63,"button",24),y("click",function(){return n.save()}),a(64," Mettre \xE0 jour "),i(),t(65,"button",25),y("click",function(){return n.cancel()}),a(66,"Annuler"),i()()()()()),r&2&&(m(4),f("ngIf",n.isLoading),m(8),s("ngModel",n.vehicle.brand),m(5),s("ngModel",n.vehicle.model),m(5),s("ngModel",n.vehicle.year),m(5),s("ngModel",n.vehicle.licensePlate),m(5),s("ngModel",n.vehicle.fuelType),m(13),s("ngModel",n.vehicle.mileage),m(5),s("ngModel",n.vehicle.status),m(11),s("ngModel",n.vehicle.color))},dependencies:[V,w,J,z,Y,ee,$,k,G,O,F,q,R,N,H,j,K,Z,S,x,ie,L,W,te,I,X,U,Q,xe,A,P],styles:[".d-flex[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:max-content}.justify-content-center[_ngcontent-%COMP%]{justify-content:center}.m-t-16[_ngcontent-%COMP%]{margin-top:16px}"]})}}return e})();var Si=[{path:"",children:[{path:"me",canActivate:[ne],data:{roles:["client"]},component:Qe},{path:"all",canActivate:[ne],data:{roles:["manager","mecanicien"]},component:Ue},{path:"add",component:Xe},{path:"edit/:id",canActivate:[ne],data:{roles:["client"]},component:Ze}]}];export{Si as VehicleRoutes};
